<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIFF Test</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
    <h2>‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡∏ú‡πà‡∏≤‡∏ô LINE LIFF</h2>
    <p id="userInfo">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
    <button onclick="sendOrder()">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á</button>

    <script>
        async function initLIFF() {
            await liff.init({ liffId: "2006986568-yjrOkKqm" });

            if (!liff.isLoggedIn()) {
                liff.login();
            }

            const profile = await liff.getProfile();
            document.getElementById("userInfo").innerText = `üë§ ‡∏ä‡∏∑‡πà‡∏≠: ${profile.displayName}`;
        }

        async function sendOrder() {
            if (!liff.isLoggedIn()) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠");

            const userId = (await liff.getProfile()).userId;
            const orderMessage = `üßä ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á: 5 ‡∏ñ‡∏∏‡∏á\nüìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà: ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 99/1`;

            liff.sendMessages([{ type: "text", text: orderMessage }])
                .then(() => alert("‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!"))
                .catch((err) => console.error("Error:", err));
        }

        initLIFF();
    </script>
</body>
</html>
